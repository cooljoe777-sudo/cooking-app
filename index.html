<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒ®ç«‹ & ã”é£¯è¨ˆç®—ã‚¢ãƒ—ãƒª</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        /* --- ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«ä¿®æ­£ --- */
        #main-menu {
            max-width: 400px;
            margin: 0 auto;
        }
        .intro-section {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 14px;
            line-height: 1.6;
        }
        .intro-section h3 {
            margin-top: 0;
            color: #e67e22;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        button {
            font-size: 18px;
            padding: 15px;
            margin: 10px auto; /* ä¸­å¤®å¯„ã› */
            width: 90%;        /* ç”»é¢ã‹ã‚‰ã¯ã¿å‡ºã•ãªã„ã‚ˆã†ã«å¹…ã‚’åˆ¶é™ */
            max-width: 350px;  /* PCã§è¦‹ã¦ã‚‚å¤§ãã™ããªã„ã‚ˆã†ã« */
            display: block;    /* ç¸¦ã«ä¸¦ã¹ã‚‹ */
            border-radius: 8px;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        button:active {
            transform: translateY(2px);
        }

        /* å„ãƒœã‚¿ãƒ³ã®è‰² */
        .btn-menu { background-color: #3498db; color: white; }
        .btn-rice { background-color: #e67e22; color: white; }
        .btn-calc { background-color: #2ecc71; color: white; }
        .btn-back { background-color: #95a5a6; color: white; margin: 20px auto; }
        
        /* æ“ä½œç”¨ãƒœã‚¿ãƒ³ï¼ˆå…¨é¸æŠãªã©ï¼‰ */
        .action-btn-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .btn-small {
            width: auto;
            padding: 10px 20px;
            font-size: 14px;
            margin: 0;
            display: inline-block;
        }
        .btn-select { background-color: #3498db; color: white; }
        .btn-clear { background-color: #e74c3c; color: white; }

        /* --- ç”»é¢åˆ‡ã‚Šæ›¿ãˆ --- */
        .hidden { display: none; }

        /* --- é£Ÿæãƒªã‚¹ãƒˆã®ãƒ†ãƒ¼ãƒ–ãƒ«é¢¨è¡¨ç¤º --- */
        .category-box {
            background: #fff;
            margin-bottom: 20px;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .category-title {
            background: #dfe6e9;
            padding: 8px;
            font-weight: bold;
            border-radius: 4px;
            margin-bottom: 10px;
            text-align: left;
        }
        .ingredient-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); /* è‡ªå‹•ã§åˆ—ã‚’èª¿æ•´ */
            gap: 10px;
            text-align: left;
        }
        .ingredient-item {
            display: flex;
            align-items: center;
            background: #f9f9f9;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #eee;
        }
        .ingredient-item input {
            margin-right: 10px;
            transform: scale(1.3); /* ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã‚’å°‘ã—å¤§ãã */
        }

        /* --- ã”é£¯è¨ˆç®—ã®ã‚¹ã‚¿ã‚¤ãƒ« --- */
        .rice-list {
            list-style: none;
            padding: 0;
            max-width: 400px;
            margin: 0 auto;
            text-align: left;
        }
        .rice-list li {
            background: white;
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* åå‰ç·¨é›†ç”¨ã®å…¥åŠ›æ¬„ */
        .name-input {
            font-size: 16px;
            padding: 5px;
            width: 120px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .rice-controls button {
            width: 30px;
            height: 30px;
            padding: 0;
            margin: 0 5px;
            font-size: 16px;
            display: inline-block;
        }
    </style>
</head>
<body>

    <div id="main-menu">
        <h1>ãƒ›ãƒ¼ãƒ ç”»é¢</h1>

        <div class="intro-section">
            <h3>ğŸ³ ã‚¢ãƒ—ãƒªã®ç›®çš„</h3>
            <p><strong>ã‚­ãƒƒã‚«ã‚±:</strong> æ¯æ—¥ã®çŒ®ç«‹ä½œã‚Šã¨è¨ˆç®—ã®è² æ‹…ã‚’æ¸›ã‚‰ã™ãŸã‚ã«ä½œæˆã—ã¾ã—ãŸã€‚</p>
            <p><strong>ç›®çš„:</strong> è·å“¡ã®åˆ¤æ–­ã‚’è£œåŠ©ã—ã€ã‚ˆã‚Šã‚¹ãƒ ãƒ¼ã‚ºãªèª¿ç†æº–å‚™ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹é“å…·ã§ã™ã€‚</p>
            <p><strong>ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong> AIæ¤œç´¢ã¯ä¾¿åˆ©ã§ã™ãŒã€åœ¨åº«çŠ¶æ³ã«åˆã‚ã›ã¦æœ€çµ‚çš„ãªé‡ã¯äººé–“ãŒèª¿æ•´ã—ã¦ãã ã•ã„ã€‚</p>
        </div>

        <button class="btn-menu" onclick="showScreen('meal-planning')">çŒ®ç«‹ã‚’è€ƒãˆã‚‹</button>
        <button class="btn-rice" onclick="showScreen('rice-calculation')">ã”é£¯ã®é‡ã‚’è¨ˆç®—</button>
    </div>

    <div id="meal-planning" class="hidden">
        <button class="btn-back" onclick="showMainMenu()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>

        <h2>å†·è”µåº«ã«ã‚ã‚‹ã‚‚ã®ã¯ï¼Ÿ</h2>
        
        <div class="action-btn-group">
            <button class="btn-small btn-select" onclick="toggleAll(true)">å…¨é¸æŠ</button>
            <button class="btn-small btn-clear" onclick="toggleAll(false)">å…¨è§£é™¤</button>
        </div>

        <form id="ingredient-form">
            <div class="category-box">
                <div class="category-title">ãŠè‚‰ãƒ»é­š</div>
                <div class="ingredient-grid">
                    <label class="ingredient-item"><input type="checkbox" name="food" value="è±šè‚‰"> è±šè‚‰</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="é¶è‚‰"> é¶è‚‰</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ã²ãè‚‰"> ã²ãè‚‰</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ç‰›è‚‰"> ç‰›è‚‰</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="é®­"> é®­</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ã‚µãƒ"> ã‚µãƒ</label>
                </div>
            </div>

            <div class="category-box">
                <div class="category-title">é‡èœãƒ»ãã®ä»–</div>
                <div class="ingredient-grid">
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ç‰ã­ã"> ç‰ã­ã</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="äººå‚"> äººå‚</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ã˜ã‚ƒãŒã„ã‚‚"> ã˜ã‚ƒãŒã„ã‚‚</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="ã‚­ãƒ£ãƒ™ãƒ„"> ã‚­ãƒ£ãƒ™ãƒ„</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="åµ"> åµ</label>
                    <label class="ingredient-item"><input type="checkbox" name="food" value="è±†è…"> è±†è…</label>
                </div>
            </div>
            
            </form>

        <button class="btn-menu" onclick="generateMenu()">çŒ®ç«‹ã‚’ææ¡ˆã™ã‚‹ï¼</button>
        
        <button class="btn-back" onclick="showMainMenu()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
    </div>

    <div id="rice-calculation" class="hidden">
        <button class="btn-back" onclick="showMainMenu()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>

        <h2>ã”é£¯ã®é‡ã‚’è¨ˆç®—</h2>
        <ul id="member-list" class="rice-list">
            </ul>
        
        <div style="background: #fff; padding: 15px; border-radius: 8px; margin-top: 20px;">
            <h3 style="margin:0 0 10px 0;">åˆè¨ˆ: <span id="total-rice" style="color:#e67e22; font-size: 24px;">0</span> g</h3>
            <p>ï¼ˆç´„ <span id="total-gou">0.0</span> åˆï¼‰</p>
        </div>

        <button class="btn-calc" onclick="calculateRice()">è¨ˆç®—ã™ã‚‹</button>
        <button class="btn-back" onclick="showMainMenu()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
    </div>

    <script>
        // --- ãƒ‡ãƒ¼ã‚¿åˆæœŸè¨­å®š ---
        // åå‰ã‚’è‡ªç”±ã«å¤‰ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã€åˆæœŸå€¤ã ã‘è¨­å®šã—ã¦ãŠãã¾ã™
        const defaultMembers = [
            { id: 'userA', name: 'åˆ©ç”¨è€…A', amount: 150 },
            { id: 'userB', name: 'åˆ©ç”¨è€…B', amount: 150 },
            { id: 'userC', name: 'åˆ©ç”¨è€…C', amount: 150 },
            { id: 'userD', name: 'åˆ©ç”¨è€…D', amount: 150 },
            { id: 'userE', name: 'åˆ©ç”¨è€…E', amount: 100 },
            { id: 'userF', name: 'åˆ©ç”¨è€…F', amount: 100 },
            { id: 'userG', name: 'åˆ©ç”¨è€…G', amount: 200 },
            { id: 'userH', name: 'åˆ©ç”¨è€…H', amount: 200 },
            { id: 'staff1', name: 'è·å“¡1', amount: 200 },
            { id: 'staff2', name: 'è·å“¡2', amount: 200 },
        ];

        // ç”»é¢ã®åˆæœŸåŒ–
        window.onload = function() {
            renderRiceList();
        };

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆé–¢æ•°
        function showScreen(screenId) {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('meal-planning').classList.add('hidden');
            document.getElementById('rice-calculation').classList.add('hidden');
            document.getElementById(screenId).classList.remove('hidden');
            window.scrollTo(0, 0); // ç”»é¢ãƒˆãƒƒãƒ—ã¸ç§»å‹•
        }

        function showMainMenu() {
            showScreen('main-menu');
        }

        // --- çŒ®ç«‹æ©Ÿèƒ½ ---
        function toggleAll(isChecked) {
            const checkboxes = document.querySelectorAll('input[name="food"]');
            checkboxes.forEach(cb => cb.checked = isChecked);
        }

        function generateMenu() {
            const checkboxes = document.querySelectorAll('input[name="food"]:checked');
            if (checkboxes.length === 0) {
                alert("é£ŸæãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“");
                return;
            }

            let query = "";
            checkboxes.forEach((cb) => {
                query += cb.value + " ";
            });
            
            // Googleæ¤œç´¢ (AIæ¦‚è¦ãŒå‡ºã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦æ¤œç´¢)
            const url = `https://www.google.com/search?q=${encodeURIComponent(query + "ãƒ¬ã‚·ãƒ” çŒ®ç«‹")}`;
            window.open(url, '_blank');
        }

        // --- ã”é£¯è¨ˆç®—æ©Ÿèƒ½ ---
        function renderRiceList() {
            const listContainer = document.getElementById('member-list');
            listContainer.innerHTML = '';

            defaultMembers.forEach((member, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <input type="text" class="name-input" value="${member.name}" id="name-${index}">
                    <div class="rice-controls">
                        <button onclick="adjustRice(${index}, -10)">-</button>
                        <span id="amount-${index}" style="font-weight:bold; width: 40px; display:inline-block; text-align:center;">${member.amount}</span>g
                        <button onclick="adjustRice(${index}, 10)">+</button>
                    </div>
                `;
                listContainer.appendChild(li);
            });
            calculateRice(); // åˆæœŸåˆè¨ˆã‚’è¡¨ç¤º
        }

        function adjustRice(index, change) {
            defaultMembers[index].amount += change;
            if (defaultMembers[index].amount < 0) defaultMembers[index].amount = 0;
            document.getElementById(`amount-${index}`).innerText = defaultMembers[index].amount;
            calculateRice();
        }

        function calculateRice() {
            let total = 0;
            defaultMembers.forEach(m => total += m.amount);
            
            // åˆè¨ˆã‚°ãƒ©ãƒ è¡¨ç¤º
            document.getElementById('total-rice').innerText = total;

            // åˆè¨ˆç®—å‡º (1åˆ = ç´„330gç‚Šãä¸ŠãŒã‚Šæ›ç®— â€»ç›®å®‰)
            // ç”Ÿç±³1åˆ(150g) â†’ ç‚Šé£¯å¾Œç´„330ã€œ350g
            const gou = (total / 330).toFixed(1);
            document.getElementById('total-gou').innerText = gou;
        }
    </script>
</body>
</html>
